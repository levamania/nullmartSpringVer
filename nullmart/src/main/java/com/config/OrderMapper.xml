<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.shoes.OrderMapper">
	<select id="selectBook" parameterType="hashmap" resultType="hashmap">
		select delivname, delivperson, phone1 , phone2, post, address1, address2, userid
		from delivinfo
		where userid = #{USERID}
	</select>
	<select id="selectBook_recent" parameterType="hashmap" resultType="hashmap">
		select  ordername, phone1, phone2, post, addr1, addr2, addr3, userid
		from ordertable
		where userid =  #{USERID}
		order by order_date desc
	</select>
	
	<insert id="insertOrder" parameterType="hashmap">
		insert all 
		into ordertable values (ocode(), cno, userid, order_name, order_postcode, order_address1, order_address2, order_address3,
													 order_telephone, payment, systimestamp, order_phone, user, user_phone, user_email1, user_eamil2)
		<foreach collection="cnos" open="(" close=")" separator="union">
			select  from dual 
		</foreach>
		ONO           NOT NULL VARCHAR2(10) 
CNO           NOT NULL VARCHAR2(80) 
USERID        NOT NULL VARCHAR2(25) 
ORDERNAME     NOT NULL VARCHAR2(20) 
POST          NOT NULL VARCHAR2(80) 
ADDR1         NOT NULL VARCHAR2(80) 
ADDR2         NOT NULL VARCHAR2(80) 
ADDR3         NOT NULL VARCHAR2(80) 
PHONE2        NOT NULL VARCHAR2(20) 
PAYMETHOD     NOT NULL VARCHAR2(10) 
ORDER_DATE    NOT NULL DATE         
PHONE1                 VARCHAR2(20) 
CALLER_NAME            VARCHAR2(20) 
CALLER_PHONE           VARCHAR2(20) 
CALLER_EMAIL1          VARCHAR2(20) 
CALLER_EMAIL2          VARCHAR2(20) 
	</insert>
</mapper>